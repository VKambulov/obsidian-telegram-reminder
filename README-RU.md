# Obsidian Telegram Reminder

Простой сервис для напоминаний в Telegram из заметок Obsidian.
Этот сервис должен работать на сервере или ПК, который будет работать постоянно без выключения.

Вы также можете использовать этот сервис для других программ, работающих с markdown файлами, таких как Logseq.

В настоящее время поддерживается только 24-часовой формат.

Тестировалось на Windows и Linux.

## Как это работает

Если вы используете Syncthing для синхронизации хранилища Obsidian между устройствами,
или если у вас есть ПК, который будет работать непрерывно, вы можете использовать этот сервис.

Сервис проверяет ваше хранилище каждые 5 минут с помощью задачи в планировщике cron и
ищет следующие шаблоны в markdown файлах: `@2024-09-01 13:00`, `@2024-09-01`.

## Быстрый старт

1. Скачайте последнюю версию для вашей ОС.
2. Поместите исполняемый файл в директорию, из которой будет запущена задача планировщика. Например: `/opt/obsidian-telegram-reminder`.
3. Поместите файл `.env` в директорию и заполните его.
4. Создайте задачу cron в вашей системе. Задача должна выполняться каждые 5 минут. Например: `*/5 * * * * /opt/obsidian-telegram-reminder/obsidian-telegram-reminder`.
5. Создайте новую заметку или напишите в существующей заметке этот текст (замените дату и время на ваши текущие): `Напомни мне! @2024-09-01 20:00`
6. Если вы все настроили правильно, через 5 минут вы получите сообщение в боте Telegram!

## Описание переменных окружения

### `OBSIDIAN_VAULT_PATH`

Полный путь к вашему хранилищу Obsidian.

Пример: `"/home/user/syncthing/My Vault"`

### `MESSAGE_TEMPLATE_PATH`

Шаблон для ваших сообщений в Telegram.

Вы можете создать заметку в Obsidian в вашем хранилище и установить ее путь в эту переменную.

Пример шаблона:

```text
Obsidian Reminder

Имя файла: {{filename}}

Дата напоминания: {{datetime}}

{{message}}
```

Markdown не поддерживается корректно в Телеграм, поэтому его шаблон должен быть в формате простого текста.

Если вы не установите шаблон, будет использоваться следующий шаблон по умолчанию:

```text
Obsidian Reminder
{{filename}}
{{datetime}}

{{message}}
```

### `TIMEZONE`

Часовой пояс для ваших напоминаний.

Ваш сервер может иметь отличный от вашего часовой пояс, поэтому вам нужно его установить.

### `REMIND_TIME`

Если вы не хотите указывать время уведомления каждый раз,
вы можете использовать шаблон уведомлений без времени: `@2024-09-01`.
В этом случае уведомление будет отправлено по умолчанию в 9:00 по вашему часовому поясу.
С помощью этой переменной вы можете переопределить время уведомления,
для этого укажите время в формате `HH:MM`.

### `TELEGRAM_BOT_TOKEN`

Ваш ключ API бота Telegram от [@BotFather](https://t.me/BotFather).

### `TELEGRAM_CHAT_ID`

ID чата Telegram.

Вы можете получить его от бота [@getmyid_bot](https://t.me/getmyid_bot).

## Сборка из исходного кода

Чтобы собрать из исходного кода, выполните эту команду:

```bash
go build
```
